<ActionBar title="Title" class="action-bar bg-darkblue">
    <NavigationButton text="{{'Back' | L}}" android.systemIcon="ic_menu_back" (tap)="goBack()"></NavigationButton>
    <Label [text]="'WEBCAM' | L" class="alarm-text"></Label>

</ActionBar>

<GridLayout [id]="'level_3_' + dataService.deviceData[idDevice].id" class="homeBackgroundImage"
            backgroundImage="~/assets/AppDesignSources_FreigestellteBilder_bg_harbour_gray.png">
    <StackLayout [id]="'level_4_' + dataService.deviceData[idDevice].id">
        <StackLayout [id]="'level_5_' + dataService.deviceData[idDevice].id" orientation="vertical" *ngIf="initialized">
            <StackLayout [id]="'level_6_' + dataService.deviceData[idDevice].id">
                <GridLayout columns="120, *" rows="30, 30" padding="5" marginBottom="10" class="bg-darkblue">
                    <GridLayout col="0" row="0" rowSpan="2" marginRight="12" *ngIf="dataService.deviceData[idDevice].boat_image_small && dataService.deviceData[idDevice].boat_image_small != 'null'">
                        <Image [src]="'' + dataService.deviceData[idDevice].boat_image_small"
                               class="boatoffice-boat-image"></Image>
                    </GridLayout>
                    <Label col="1" row="0" [text]="'Boat' | L" class="c-white t-16 font-weight-bold" height="30"></Label>
                    <Label col="1" row="1" [text]="dataService.deviceData[idDevice].name"
                           class="alarm-blue t-16" height="30"></Label>
                </GridLayout>
                <StackLayout orientation="horizontal" height="60">
                    <GridLayout
                            class="{{'interval-button' + (interval == selectedIntervalId ? '-selected-3' : '-3')}}" verticalAlignment="center" horizontalAlignment="center"
                            (tap)="setSelectedInterval(interval)" *ngFor="let interval of [0,1,2]">
                        <Label [text]="('Webcam' | L) + ' ' + (interval+1)" verticalAlignment="center" horizontalAlignment="center"></Label>
                    </GridLayout>
                </StackLayout>
                <StackLayout orientation="vertical" padding="10" class="alarm-card t-18" [visibility]="selectedIntervalId > 0 && !dataService.deviceData[idDevice].is_pro ? 'visible' : 'collapsed'">
                    <TextView fontSize="18" text="{{'Please buy Pro' | L}}"></TextView>
                </StackLayout>
                <StackLayout class="alarm-card" padding="5,10,10,10" marginBottom="10" *ngIf="selectedIntervalId==0 && dataService.boatStatus && dataService.boatStatus[dataService.deviceData[idDevice].id] && dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam1 && dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam1.url" [visibility]="selectedIntervalId <= 0 || dataService.deviceData[idDevice].is_pro ? 'visible' : 'collapsed'">
                    <GridLayout columns="*, auto, 10" rows="40" paddingBottom="-10">
                        <Label col=0 row=0 [text]="'WEBCAM' | L" class="t-16 font-weight-bold"
                               verticalAlignment="middle" horizontalAlignment="left"></Label>
                        <Label col=1 row=0 [text]="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam1.location_name"
                               class="t-12 font-weight-bold"
                               verticalAlignment="middle" horizontalAlignment="right"></Label>
                    </GridLayout>
                    <GridLayout columns="*, auto, 10" rows="20" paddingBottom="10">
                        <Label col=0 row=0 [text]="(dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam1.distance  | number:'1.1-1') + ' km'"
                               class="t-12 font-weight-normal"
                               verticalAlignment="middle" horizontalAlignment="left"></Label>
                        <Label col=1 row=0 [text]="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam1.name"
                               class="t-12 font-weight-normal"
                               verticalAlignment="middle" horizontalAlignment="right"></Label>
                    </GridLayout>
                    <GridLayout columns="*" rows="*" paddingBottom="0" [id]="'webcam_'+idDevice" *ngIf="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam1.url" >
                        <WebView [src]="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam1.url" stretch="aspectFit" zoomScale="1" scaleX="1" scaleY="1"
                                 (loadStarted)="onLoadStarted($event)"
                                 (loadFinished)="onLoadFinished($event)">
                        </WebView>
                    </GridLayout>
                </StackLayout>
                <StackLayout class="alarm-card" padding="5,10,10,10" marginBottom="10" *ngIf="selectedIntervalId==1 && dataService.boatStatus && dataService.boatStatus[dataService.deviceData[idDevice].id] && dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam2 && dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam2.url" [visibility]="selectedIntervalId <= 0 || dataService.deviceData[idDevice].is_pro ? 'visible' : 'collapsed'">
                    <GridLayout columns="*, auto, 10" rows="40" paddingBottom="-10">
                        <Label col=0 row=0 [text]="'WEBCAM' | L" class="t-16 font-weight-bold"
                               verticalAlignment="middle" horizontalAlignment="left"></Label>
                        <Label col=1 row=0 [text]="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam2.location_name"
                               class="t-12 font-weight-bold"
                               verticalAlignment="middle" horizontalAlignment="right"></Label>
                    </GridLayout>
                    <GridLayout columns="*, auto, 10" rows="20" paddingBottom="10">
                        <Label col=0 row=0 [text]="(dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam2.distance  | number:'1.1-1') + ' km'"
                               class="t-12 font-weight-normal"
                               verticalAlignment="middle" horizontalAlignment="left"></Label>
                        <Label col=1 row=0 [text]="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam2.name"
                               class="t-12 font-weight-normal"
                               verticalAlignment="middle" horizontalAlignment="right"></Label>
                    </GridLayout>
                    <GridLayout columns="*" rows="*" paddingBottom="0" [id]="'webcam_'+idDevice" *ngIf="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam2.url" >
                        <WebView [src]="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam2.url" stretch="aspectFit" zoomScale="1" scaleX="1" scaleY="1"
                                 (loadStarted)="onLoadStarted($event)"
                                 (loadFinished)="onLoadFinished($event)">
                        </WebView>
                    </GridLayout>
                </StackLayout>
                <StackLayout class="alarm-card" padding="5,10,10,10" marginBottom="10" *ngIf="selectedIntervalId==2 && dataService.boatStatus && dataService.boatStatus[dataService.deviceData[idDevice].id] && dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam3 && dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam3.url" [visibility]="selectedIntervalId <= 0 || dataService.deviceData[idDevice].is_pro ? 'visible' : 'collapsed'">
                    <GridLayout columns="*, auto, 10" rows="40" paddingBottom="-10">
                        <Label col=0 row=0 [text]="'WEBCAM' | L" class="t-16 font-weight-bold"
                               verticalAlignment="middle" horizontalAlignment="left"></Label>
                        <Label col=1 row=0 [text]="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam3.location_name"
                               class="t-12 font-weight-bold"
                               verticalAlignment="middle" horizontalAlignment="right"></Label>
                    </GridLayout>
                    <GridLayout columns="*, auto, 10" rows="20" paddingBottom="10">
                        <Label col=0 row=0 [text]="(dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam3.distance  | number:'1.1-1') + ' km'"
                               class="t-12 font-weight-normal"
                               verticalAlignment="middle" horizontalAlignment="left"></Label>
                        <Label col=1 row=0 [text]="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam3.name"
                               class="t-12 font-weight-normal"
                               verticalAlignment="middle" horizontalAlignment="right"></Label>
                    </GridLayout>
                    <GridLayout columns="*" rows="*" paddingBottom="0" [id]="'webcam_'+idDevice" *ngIf="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam3.url" >
                        <WebView [src]="dataService.boatStatus[dataService.deviceData[idDevice].id].nearest_webcam3.url" stretch="aspectFit" zoomScale="1" scaleX="1" scaleY="1"
                                 (loadStarted)="onLoadStarted($event)"
                                 (loadFinished)="onLoadFinished($event)">
                        </WebView>
                    </GridLayout>
                </StackLayout>
            </StackLayout>
        </StackLayout>
    </StackLayout>
</GridLayout>
